@use "../../../styles/colours" as c;
@use "../../../styles/sizes" as s;
@import "../../../styles/typo.scss";

.recipe__meta {
  &__wrapper {
    --label-width: 3rem;
    color: c.$grey-52;
    display: block;
    z-index: 0;
  }
  &__toggle {
    background-color: transparent;
    outline: 0;
    border: 0;
    font-family: inherit;
    font-size: inherit;
    color: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    font-weight: inherit;
    display: flex;
    align-items: center;
  }
  &__label {
    font-size: 0.8125rem;
    letter-spacing: calc(0.2 / 13 * 1em);
    line-height: 1rem;
    transition: width 100ms ease-in-out;
    cursor: pointer;
    opacity: 0;
    width: 0;
    white-space: nowrap;
    overflow: hidden;
    flex: none;
    padding-left: s.$s2;
    text-align: left;
  }
  &__input {
    grid-row: 2 / 3;
    outline: 0;
    flex: 1;
    display: none;
    font-weight: 500;
    position: relative;
    
    input {
      border-radius: 0.375rem;
      padding: s.$s2 s.$s3;
      background-color: c.$accent;
      border: 0;
      outline: 0;
      font-family: inherit;
      text-align: right;
      width: 5.5rem;
      flex: 1;
      font-weight: 500;
      padding-right: s.$s4;
      
      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      -moz-appearance: textfield;
    }
    
    &,
    input {
      color: c.$white;
      text-align: right;
      line-height: 1rem;
      font-size: 0.8125rem;
      letter-spacing: calc(0.2 / 13 * 1em);
    }
    
    span {
      position: absolute;
      flex: none;
      opacity: 0.75;
      right: s.$s2;
      top: 50%;
      transform: translateY(-50%);
      user-select: none;
      pointer-events: none;
      font-size: 0.875rem;
    }
  }
  &__icon {
    cursor: pointer;
    height: 1.5rem;
    
    .icon {
      fill: c.$grey-82;
    }
  }
  
  // &__wrapper[data-hasvalue="false"] {
  //   .recipe__meta {
  //     &__input {
  //       opacity: 0;
  //       pointer-events: none;
  //       user-select: none;
  //     }
  //     &__label {
  //       transform: translateY(1.5rem);
  //     }
  //   }
  // }

  &__wrapper {
    &:hover {
      .recipe__meta {
        &__label {
          opacity: 1;
          pointer-events: auto;
          color: c.$accent;
          width: var(--label-width);
        }
        &__icon {
          .icon {
            fill: c.$accent;
          }
        }
      }
    }
    &.show {
      .recipe__meta {
        &__input {
          display: inline-flex;
          align-items: center;
        }
        &__label {
          // display: none;
          // transform: translateY(0);
          opacity: 0;
          pointer-events: none;
        }
        &__icon {
          .icon {
            fill: c.$grey-31;
          }
        }
        // &__input {
        //   opacity: 1;
        //   pointer-events: auto;
        // }
      }
    }
  }
}
